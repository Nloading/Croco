<div class="offers-container">
  <h2>Spin the Wheel</h2>

  <!-- Wheel -->
  <div class="wheel-wrapper">
    <div class="wheel" [style.transform]="'rotate(' + rotationAngle() + 'deg)'">
      @for (n of wheelNumbers; track n) {
        <div class="sector" [style.transform]="'rotate(' + ((n - 1) * 36) + 'deg)'">
          <span class="sector-label">{{ n }}</span>
        </div>
      }
    </div>
    <div class="pointer"></div>
  </div>

  <!-- Input + Button -->
  <div class="wheel-controls">
    <input
      type="number"
      min="1"
      max="10"
      [(ngModel)]="inputNumber"
      placeholder="Enter 1-10"
    />
    <button (click)="spinWheel()">Spin</button>
  </div>

  <!-- Error Message -->
  @if (errorMessage()) {
    <div class="error-message">{{ errorMessage() }}</div>
  }

  <!-- Leaderboard Filters -->
  <div class="leaderboard-filters">
    @for (w of weekOptions; track w) {
      <button
        (click)="setFilter(w)"
        [class.active]="filterWeek() === w"
      >
        {{ w }}
      </button>
    }
  </div>

  <!-- Leaderboard Table -->
  <table>
    <thead>
      <tr>
        <th>Place</th>
        <th>Login Name</th>
        <th>Customer ID</th>
        <th>Week</th>
        <th>Posts</th>
      </tr>
    </thead>
    <tbody>
      @for (item of filteredLeaderboard(); track item.customerId + '-' + item.week + '-' + item.place) {
        <tr>
          <td>{{ item.place }}</td>
          <td>{{ item.loginName }}</td>
          <td>{{ item.customerId }}</td>
          <td>{{ item.week }}</td>
          <td>
            <button class="posts-btn" [routerLink]="['/posts']" [queryParams]="{ userId: item.customerId }">
              View Posts
            </button>
          </td>
        </tr>
      }
      @empty {
        <tr><td colspan="5">No records found.</td></tr>
      }
    </tbody>
  </table>
</div>
